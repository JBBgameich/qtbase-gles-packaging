From eaeb89dacb59875de5e16dad26258c12cf011b88 Mon Sep 17 00:00:00 2001
From: Aurelien Jarno <aurelien@aurel32.net>
Date: Sun, 10 Nov 2013 23:38:15 +0100
Subject: [PATCH] Fix Power atomic code

Commit 3f1a4be30263a676b7e188bf6cfa809c7788c87f changed loadAcquire
to const in qbasicatomic.h. However it has not been done in
qoldbasicatomic.h which is still used by Power atomic code.

Change-Id: Ifa86d149a98ad52ec3f23a928199643f564e57f5
---
 src/corelib/thread/qoldbasicatomic.h | 4 ++--
 1 file changed, 2 insertions(+), 2 deletions(-)

diff --git a/src/corelib/thread/qoldbasicatomic.h b/src/corelib/thread/qoldbasicatomic.h
index b755256..473f1a5 100644
--- a/src/corelib/thread/qoldbasicatomic.h
+++ b/src/corelib/thread/qoldbasicatomic.h
@@ -63,7 +63,7 @@ public:
     // Atomic API, implemented in qatomic_XXX.h
 
     int load() const { return _q_value; }
-    int loadAcquire() { return _q_value; }
+    int loadAcquire() const { return _q_value; }
     void store(int newValue) { _q_value = newValue; }
     void storeRelease(int newValue) { _q_value = newValue; }
 
@@ -107,7 +107,7 @@ public:
     // Atomic API, implemented in qatomic_XXX.h
 
     T *load() const { return _q_value; }
-    T *loadAcquire() { return _q_value; }
+    T *loadAcquire() const { return _q_value; }
     void store(T *newValue) { _q_value = newValue; }
     void storeRelease(T *newValue) { _q_value = newValue; }
 
-- 
1.8.4.2

